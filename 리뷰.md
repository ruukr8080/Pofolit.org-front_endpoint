# Pofolit Client í”„ë¡œì íŠ¸ ë¦¬ë·°

## í”„ë¡œì íŠ¸ ê°œìš”

Pofolit ClientëŠ” Next.js 14ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ React ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ, ì‚¬ìš©ì ì¸ì¦ ë° í”„ë¡œí•„ ê´€ë¦¬ë¥¼ ìœ„í•œ í”Œë«í¼ì…ë‹ˆë‹¤. TypeScriptë¥¼ ì‚¬ìš©í•˜ì—¬ íƒ€ì… ì•ˆì „ì„±ì„ í™•ë³´í•˜ê³ , Redux Toolkitê³¼ RTK Queryë¥¼ í™œìš©í•œ ìƒíƒœ ê´€ë¦¬ ë° API í†µì‹ ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

### ê¸°ìˆ  ìŠ¤íƒ

- **Frontend Framework**: Next.js 14 (App Router)
- **Language**: TypeScript
- **State Management**: Redux Toolkit + RTK Query
- **Styling**: Tailwind CSS
- **Authentication**: OAuth2 (Google, Kakao)
- **Persistence**: redux-persist
- **UI Components**: HTML5 Dialog, Custom Components

ë³´ì•ˆ ë° , oauth2/jwt ê´€ë ¨ ëœ ê¸°ëŠ¥ì€ ë°±ì—”ë“œ(ìŠ¤í”„ë§)ì—ì„œ ëŒ€ë¶€ë¶„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

### í”„ë¡œì íŠ¸ êµ¬ì¡°

```
src/
â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”œâ”€â”€ layout.tsx         # ê¸€ë¡œë²Œ ë ˆì´ì•„ì›ƒ ë° í”„ë¡œë°”ì´ë”
â”‚   â”œâ”€â”€ page.tsx           # ë©”ì¸ í˜ì´ì§€
â”‚   â””â”€â”€ auth/
â”‚       â”œâ”€â”€ callback/      # OAuth ì½œë°± ì²˜ë¦¬
â”‚       â”œâ”€â”€ login/         # ë¡œê·¸ì¸ í˜ì´ì§€
â”‚       â”œâ”€â”€ policy/        # ì •ì±… í˜ì´ì§€
â”‚       â””â”€â”€ signup/        # íšŒì›ê°€ì… í˜ì´ì§€
â”œâ”€â”€ components/            # ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ client/           # í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ server/           # ì„œë²„ ì»´í¬ë„ŒíŠ¸ (í˜„ì¬ ë¹„ì–´ìˆìŒ)
â”‚   â””â”€â”€ *.tsx             # ê°œë³„ ì»´í¬ë„ŒíŠ¸ íŒŒì¼ë“¤
â”œâ”€â”€ store/                # Redux ìƒíƒœ ê´€ë¦¬
â”‚   â”œâ”€â”€ store.ts          # ìŠ¤í† ì–´ ì„¤ì •
â”‚   â”œâ”€â”€ authSlice.ts      # ì¸ì¦ ìƒíƒœ
â”‚   â”œâ”€â”€ userSlice.ts      # ì‚¬ìš©ì ìƒíƒœ
â”‚   â”œâ”€â”€ apiConfig.ts      # RTK Query ì„¤ì •
â”‚   â””â”€â”€ customExceptionHandler.ts # ì—ëŸ¬ ì²˜ë¦¬
â”œâ”€â”€ types/                # TypeScript íƒ€ì… ì •ì˜
â”‚   â”œâ”€â”€ user.ts           # ì‚¬ìš©ì ê´€ë ¨ íƒ€ì…
â”‚   â”œâ”€â”€ http.ts           # HTTP ì‘ë‹µ íƒ€ì…
â”‚   â””â”€â”€ auth.ts           # ì¸ì¦ ê´€ë ¨ íƒ€ì…
â”œâ”€â”€ hooks/                # ì»¤ìŠ¤í…€ í›…
â”‚   â””â”€â”€ useAuthCookieSync.ts # ì¿ í‚¤ ë™ê¸°í™” í›…
â””â”€â”€ styles/               # ìŠ¤íƒ€ì¼ íŒŒì¼
    â””â”€â”€ globals.css       # ê¸€ë¡œë²Œ ìŠ¤íƒ€ì¼
```

## ì£¼ìš” ê¸°ëŠ¥

1. **ì‚¬ìš©ì ì¸ì¦**: OAuth2ë¥¼ í†µí•œ Google/Kakao ë¡œê·¸ì¸
2. **í”„ë¡œí•„ ê´€ë¦¬**: ì‚¬ìš©ì ì •ë³´ í‘œì‹œ ë° ê´€ë¦¬
3. **íšŒì›ê°€ì…**: ì¶”ê°€ ì •ë³´ ì…ë ¥ì„ í†µí•œ íšŒì›ê°€ì…
4. **ì—ëŸ¬ ì²˜ë¦¬**: ì „ì—­ ì—ëŸ¬ ëª¨ë‹¬ì„ í†µí•œ ì‚¬ìš©ì í”¼ë“œë°±
5. **ë°˜ì‘í˜• UI**: ëª¨ë°”ì¼ ì¹œí™”ì ì¸ ë””ìì¸

## ì•„í‚¤í…ì²˜ íŒ¨í„´

- **ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜**: ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸ ë‹¨ìœ„ ê°œë°œ
- **ìƒíƒœ ê´€ë¦¬**: Reduxë¥¼ í†µí•œ ì¤‘ì•™ ì§‘ì¤‘ì‹ ìƒíƒœ ê´€ë¦¬
- **API í†µì‹ **: RTK Queryë¥¼ í†µí•œ ì„ ì–¸ì  API í˜¸ì¶œ
- **íƒ€ì… ì•ˆì „ì„±**: TypeScriptë¥¼ í†µí•œ ì»´íŒŒì¼ íƒ€ì„ íƒ€ì… ì²´í¬
- **ëª¨ë“ˆí™”**: ê´€ì‹¬ì‚¬ ë¶„ë¦¬ë¥¼ í†µí•œ ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ

## ì¸ì¦ ì‹œìŠ¤í…œ

### OAuth2 í”Œë¡œìš°

1. **ë¡œê·¸ì¸ ì‹œì‘**: ì‚¬ìš©ìê°€ ì†Œì…œ ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­
2. **ë¦¬ë””ë ‰ì…˜**: OAuth ì œê³µìë¡œ ë¦¬ë””ë ‰ì…˜ (Google/Kakao)
3. **ì½œë°± ì²˜ë¦¬**: `/auth/callback` í˜ì´ì§€ì—ì„œ í† í° ìˆ˜ì‹ 
4. **í† í° ì €ì¥**: ì•¡ì„¸ìŠ¤ í† í°ì„ ì¿ í‚¤ì— ì €ì¥
5. **ìƒíƒœ ë™ê¸°í™”**: `useAuthCookieSync` í›…ì„ í†µí•´ Redux ìƒíƒœ ì—…ë°ì´íŠ¸
6. **ìœ ì € ì •ë³´ ì¡°íšŒ**: RTK Queryë¥¼ í†µí•´ ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°

### ì£¼ìš” ì»´í¬ë„ŒíŠ¸

#### SocialLoginButtons

```tsx
// ì†Œì…œ ë¡œê·¸ì¸ ë²„íŠ¼ ì»´í¬ë„ŒíŠ¸
const SocialLoginButton: React.FC<SocialLoginButtonProps> = ({
  provider,
  label,
  icon: Icon,
  redirectUrl,
}) => {
  const handleClick = () => {
    window.location.href = redirectUrl; // OAuth ë¦¬ë””ë ‰ì…˜
  };
  // ... ìŠ¤íƒ€ì¼ë§ ë° ë Œë”ë§
};
```

#### UserWidget

```tsx
// ë¡œê·¸ì¸ ìœ„ì ¯ ì»´í¬ë„ŒíŠ¸
const UserWidget: React.FC<UserWidgetProps> = ({ isOpen, onClose }) => {
  return (
    <dialog open={isOpen}>
      <SocialLoginButtons />
      {/* ë¡œê·¸ì¸ í¼ ë° ë²„íŠ¼ë“¤ */}
    </dialog>
  );
};
```

### Redux ìƒíƒœ ê´€ë¦¬

#### authSlice.ts

```typescript
const authSlice = createSlice({
  name: "auth",
  initialState: { isSignedIn: false },
  reducers: {
    setSignState: (state, action) => {
      state.isSignedIn = !!action.payload;
    },
    logout: (state) => {
      state.isSignedIn = false;
    },
  },
});
```

#### userSlice.ts

```typescript
const userSlice = createSlice({
  name: "user",
  initialState: { user: null },
  reducers: {
    setUserState: (state, action) => {
      state.user = action.payload;
    },
    removeUserInfo: (state) => {
      state.user = null;
    },
  },
});
```

### ì¿ í‚¤ ê´€ë¦¬

#### useAuthCookieSync.ts

```typescript
export function useAccessTokenSync() {
  const dispatch = useDispatch();
  useEffect(() => {
    const pre = getCookie("pre"); // ì•¡ì„¸ìŠ¤ í† í° ì¿ í‚¤ ì¡°íšŒ
    if (pre) {
      dispatch(setSignState(pre));
      // ìœ ì € ì •ë³´ API í˜¸ì¶œ (í˜„ì¬ ì£¼ì„ ì²˜ë¦¬ë¨)
      fetch("/api/v1/users/me", {
        headers: { Authorization: `Bearer ${pre}` },
      })
        .then((res) => res.json())
        .then((data) => {
          // ìœ ì € ì •ë³´ ì €ì¥ ë¡œì§
        });
    }
  }, [dispatch]);
}
```

### ì¸ì¦ ì½œë°± ì²˜ë¦¬

#### auth/callback/page.tsx

```tsx
export default function CallbackPage() {
  useEffect(() => {
    const urlParams = new URLSearchParams(window.location.search);
    const token = urlParams.get("token");

    if (token) {
      // í† í°ì„ ì¿ í‚¤ì— ì €ì¥
      document.cookie = `pre=${token}; path=/`;
      // í™ˆí˜ì´ì§€ë¡œ ë¦¬ë””ë ‰ì…˜
      router.push("/");
    }
  }, []);

  return <LoadingSpinner />;
}
```

## ì‚¬ìš©ì ê´€ë¦¬ ì‹œìŠ¤í…œ

### RTK Queryë¥¼ í™œìš©í•œ API í†µì‹ 

#### apiConfig.ts

```typescript
export const userApi = createApi({
  reducerPath: "userApi",
  baseQuery: fetchBaseQuery({
    baseUrl: "/api/v1",
    prepareHeaders: (headers) => {
      const token = getCookie("pre");
      if (token) {
        headers.set("Authorization", `Bearer ${token}`);
      }
      return headers;
    },
  }),
  endpoints: (builder) => ({
    getUser: builder.query<User, void>({
      query: () => "/users/me",
    }),
  }),
});
```

### ì‚¬ìš©ì ì •ë³´ í‘œì‹œ

#### UserProfile ì»´í¬ë„ŒíŠ¸

```tsx
export function UserProfile({ user }: Readonly<{ user: User }>) {
  return (
    <div
      style={{ display: "flex", flexDirection: "column", alignItems: "center" }}
    >
      {user.profileImageUrl && (
        <img
          src={user.profileImageUrl}
          alt="í”„ë¡œí•„ ì´ë¯¸ì§€"
          style={{ width: 80, height: 80, borderRadius: 40, marginBottom: 12 }}
        />
      )}
      <p style={{ fontWeight: 700, fontSize: 18 }}>{user.nickname}</p>
    </div>
  );
}
```

#### UserAvatar ì»´í¬ë„ŒíŠ¸

```tsx
export default function UserAvatar({ imageUrl, altText }: UserAvatarProps) {
  return (
    <div className="w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center">
      <img
        src={imageUrl}
        alt={altText}
        className="w-full h-full rounded-full"
      />
    </div>
  );
}
```

### ë©”ì¸ í˜ì´ì§€ ì‚¬ìš©ì ì •ë³´ í‘œì‹œ

#### page.tsx

```tsx
export default function HomePage() {
  const { data: user, isLoading, error } = useGetUserQuery();

  if (isLoading) return <LoadingSpinner />;
  if (error) return <div>ì‚¬ìš©ì ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>;

  return (
    <div>
      {user ? <UserProfile user={user} /> : <div>ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.</div>}
      <LogoutButton />
    </div>
  );
}
```

### ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬

#### LogoutButton ì»´í¬ë„ŒíŠ¸

```tsx
const LogoutButton: React.FC = () => {
  const router = useRouter();
  const dispatch = useDispatch();

  const handleLogout = () => {
    // í† í° ì¿ í‚¤ ì‚­ì œ ë° ìƒíƒœ ì´ˆê¸°í™”
    dispatch(removeUserInfo());
    router.replace("/");
  };

  return <button onClick={handleLogout}>ë¡œê·¸ì•„ì›ƒ</button>;
};
```

### TypeScript íƒ€ì… ì •ì˜

#### user.ts

```typescript
export interface User {
  id: number;
  email: string;
  nickname: string;
  profileImageUrl?: string;
  role: Role;
  job?: string;
  domain?: string;
}

export enum Role {
  USER = "USER",
  GUEST = "GUEST",
}
```

### ì‚¬ìš©ì ì •ë³´ í”Œë¡œìš°

1. **í˜ì´ì§€ ë¡œë“œ**: `useGetUserQuery`ë¥¼ í†µí•´ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ
2. **ë¡œë”© ìƒíƒœ**: `LoadingSpinner` í‘œì‹œ
3. **ì„±ê³µ**: `UserProfile` ì»´í¬ë„ŒíŠ¸ë¡œ ì‚¬ìš©ì ì •ë³´ ë Œë”ë§
4. **ì—ëŸ¬**: ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ ë˜ëŠ” ë¡œê·¸ì¸ ìœ ë„
5. **ë¡œê·¸ì•„ì›ƒ**: `removeUserInfo` ì•¡ì…˜ìœ¼ë¡œ ìƒíƒœ ì´ˆê¸°í™” ë° ë¦¬ë””ë ‰ì…˜

## ì»´í¬ë„ŒíŠ¸ ì•„í‚¤í…ì²˜

### ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸

#### layout.tsx (ê¸€ë¡œë²Œ ë ˆì´ì•„ì›ƒ)

```tsx
export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="ko">
      <body>
        <Provider store={store}>
          <PersistGate loading={<LoadingSpinner />} persistor={persistor}>
            <GlobalErrorModal />
            <Header />
            {children}
            <Footer />
          </PersistGate>
        </Provider>
      </body>
    </html>
  );
}
```

#### Header.tsx (í—¤ë” ì»´í¬ë„ŒíŠ¸)

```tsx
export default function Header() {
  const { data: user } = useGetUserQuery();

  return (
    <header>
      <div className="flex justify-between items-center">
        <Link href="/">Pofolit</Link>
        <div className="flex items-center gap-4">
          <UserAvatar
            imageUrl={user?.profileImageUrl}
            altText={user?.nickname}
          />
          <UserWidget />
        </div>
      </div>
    </header>
  );
}
```

### ì¸ì¦ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸

#### UserWidget.tsx (ë¡œê·¸ì¸ ìœ„ì ¯)

```tsx
const UserWidget: React.FC<UserWidgetProps> = ({ isOpen, onClose }) => {
  return (
    <dialog open={isOpen} onClose={onClose}>
      <div className="p-6">
        <h2 className="text-xl font-bold mb-4">ë¡œê·¸ì¸</h2>
        <SocialLoginButtons />
        <button onClick={onClose} className="mt-4">
          ë‹«ê¸°
        </button>
      </div>
    </dialog>
  );
};
```

#### SocialLoginButtons.tsx (ì†Œì…œ ë¡œê·¸ì¸ ë²„íŠ¼)

```tsx
const SocialLoginButton: React.FC<SocialLoginButtonProps> = ({
  provider,
  label,
  icon: Icon,
  redirectUrl,
}) => {
  const handleClick = () => {
    window.location.href = redirectUrl;
  };

  return (
    <button onClick={handleClick} className="...">
      <Icon className="mr-3" />
      <span>{label}</span>
    </button>
  );
};
```

### ì‚¬ìš©ì í”„ë¡œí•„ ì»´í¬ë„ŒíŠ¸

#### UserProfile.tsx

```tsx
export function UserProfile({ user }: Readonly<{ user: User }>) {
  return (
    <div className="flex flex-col items-center">
      {user.profileImageUrl && (
        <img
          src={user.profileImageUrl}
          alt="í”„ë¡œí•„ ì´ë¯¸ì§€"
          className="w-20 h-20 rounded-full mb-3"
        />
      )}
      <p className="font-bold text-lg">{user.nickname}</p>
      <p className="text-gray-600">{user.email}</p>
    </div>
  );
}
```

#### UserAvatar.tsx

```tsx
export default function UserAvatar({ imageUrl, altText }: UserAvatarProps) {
  return (
    <div className="w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center">
      <img
        src={imageUrl}
        alt={altText}
        className="w-full h-full rounded-full"
      />
    </div>
  );
}
```

### í¼ ì»´í¬ë„ŒíŠ¸

#### SignupForm.tsx (íšŒì›ê°€ì… í¼)

```tsx
export default function SignupForm({
  form,
  handleChange,
  handleSubmit,
  router,
}: SignupFormProps) {
  return (
    <form onSubmit={handleSubmit} className="space-y-4">
      <input
        type="text"
        name="nickname"
        value={form.nickname}
        onChange={handleChange}
        placeholder="ë‹‰ë„¤ì„"
        required
      />
      <select name="job" value={form.job} onChange={handleChange}>
        {JOBS.map((job) => (
          <option key={job} value={job}>
            {job}
          </option>
        ))}
      </select>
      {/* ê¸°íƒ€ í•„ë“œë“¤ */}
      <button type="submit">íšŒì›ê°€ì…</button>
    </form>
  );
}
```

### ìœ í‹¸ë¦¬í‹° ì»´í¬ë„ŒíŠ¸

#### LoadingSpinner.tsx

```tsx
export default function LoadingSpinner({
  size = 48,
  color = "#2563eb",
}: LoadingSpinnerProps) {
  return (
    <output aria-label="ë¡œë”© ì¤‘" className="flex items-center justify-center">
      <svg width={size} height={size} viewBox="0 0 50 50">
        <circle
          cx="25"
          cy="25"
          r="20"
          fill="none"
          stroke={color}
          strokeWidth="5"
          strokeDasharray="31.4 31.4"
          strokeLinecap="round"
        >
          <animateTransform
            attributeName="transform"
            type="rotate"
            from="0 25 25"
            to="360 25 25"
            dur="1s"
            repeatCount="indefinite"
          />
        </circle>
      </svg>
    </output>
  );
}
```

#### Toast.tsx (í† ìŠ¤íŠ¸ ì•Œë¦¼)

```tsx
export default function Toast({
  message,
  duration = 2500,
  onClose,
}: ToastProps) {
  const [visible, setVisible] = useState(true);

  useEffect(() => {
    const timer = setTimeout(() => {
      setVisible(false);
      if (onClose) onClose();
    }, duration);
    return () => clearTimeout(timer);
  }, [duration, onClose]);

  if (!visible) return null;

  return (
    <div className="fixed bottom-8 left-1/2 -translate-x-1/2 bg-blue-600 text-white px-6 py-3 rounded-lg shadow-lg z-50">
      {message}
    </div>
  );
}
```

### ì—ëŸ¬ ì²˜ë¦¬ ì»´í¬ë„ŒíŠ¸

#### ErrorModal.tsx (ê¸€ë¡œë²Œ ì—ëŸ¬ ëª¨ë‹¬)

```tsx
export default function ErrorModal() {
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    const handleGlobalError = (event: CustomEvent) => {
      setError(event.detail.message);
    };

    window.addEventListener("globalError", handleGlobalError as EventListener);
    return () =>
      window.removeEventListener(
        "globalError",
        handleGlobalError as EventListener
      );
  }, []);

  if (!error) return null;

  return (
    <dialog open className="fixed inset-0 z-50">
      <div className="bg-white p-6 rounded-lg">
        <h3 className="text-lg font-bold mb-4">ì˜¤ë¥˜ ë°œìƒ</h3>
        <p>{error}</p>
        <button onClick={() => setError(null)} className="mt-4">
          ë‹«ê¸°
        </button>
      </div>
    </dialog>
  );
}
```

### ì»´í¬ë„ŒíŠ¸ ê³„ì¸µ êµ¬ì¡°

```
RootLayout
â”œâ”€â”€ GlobalErrorModal
â”œâ”€â”€ Header
â”‚   â”œâ”€â”€ Logo
â”‚   â”œâ”€â”€ UserAvatar
â”‚   â””â”€â”€ UserWidget
â”‚       â””â”€â”€ SocialLoginButtons
â”œâ”€â”€ Main Content
â”‚   â”œâ”€â”€ HomePage
â”‚   â”‚   â”œâ”€â”€ UserProfile
â”‚   â”‚   â””â”€â”€ LogoutButton
â”‚   â”œâ”€â”€ Auth Pages
â”‚   â”‚   â”œâ”€â”€ LoginPage
â”‚   â”‚   â”œâ”€â”€ SignupPage
â”‚   â”‚   â”‚   â””â”€â”€ SignupForm
â”‚   â”‚   â”œâ”€â”€ CallbackPage
â”‚   â”‚   â””â”€â”€ PolicyPage
â”‚   â”‚       â””â”€â”€ Policy
â””â”€â”€ Footer
```

### ì»´í¬ë„ŒíŠ¸ ë””ìì¸ íŒ¨í„´

1. **Props ì¸í„°í˜ì´ìŠ¤**: ê° ì»´í¬ë„ŒíŠ¸ì˜ propsë¥¼ ëª…í™•íˆ ì •ì˜
2. **ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬**: ì‚¬ìš©ì ìƒí˜¸ì‘ìš©ì„ ìœ„í•œ ì´ë²¤íŠ¸ ì²˜ë¦¬
3. **ì¡°ê±´ë¶€ ë Œë”ë§**: ë¡œë”© ìƒíƒœ, ì—ëŸ¬ ìƒíƒœ, ì¸ì¦ ìƒíƒœì— ë”°ë¥¸ ë Œë”ë§
4. **ì ‘ê·¼ì„±**: ARIA ì†ì„± ë° ì‹œë§¨í‹± HTML ì‚¬ìš©
5. **ë°˜ì‘í˜• ë””ìì¸**: Tailwind CSSë¥¼ í™œìš©í•œ ëª¨ë°”ì¼ ì¹œí™”ì  ë””ìì¸

## ì—ëŸ¬ ì²˜ë¦¬ ì‹œìŠ¤í…œ

### ì „ì—­ ì—ëŸ¬ ì²˜ë¦¬

#### customExceptionHandler.ts

```typescript
export function handleApiError(error: any): void {
  let message = "ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.";

  if (error?.status) {
    switch (error.status) {
      case 400:
        message = "ì˜ëª»ëœ ìš”ì²­ì…ë‹ˆë‹¤.";
        break;
      case 401:
        message = "ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤.";
        break;
      case 403:
        message = "ì ‘ê·¼ì´ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤.";
        break;
      case 404:
        message = "ìš”ì²­í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
        break;
      case 500:
        message = "ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.";
        break;
      default:
        message = `ì˜¤ë¥˜: ${error.status}`;
    }
  }

  // ì „ì—­ ì—ëŸ¬ ì´ë²¤íŠ¸ ë°œìƒ
  const globalErrorEvent = new CustomEvent("globalError", {
    detail: { message },
  });
  window.dispatchEvent(globalErrorEvent);
}
```

### ê¸€ë¡œë²Œ ì—ëŸ¬ ëª¨ë‹¬

#### ErrorModal.tsx

```tsx
export default function ErrorModal() {
  const [error, setError] = useState<string | null>(null);
  const [isVisible, setIsVisible] = useState(false);

  useEffect(() => {
    const handleGlobalError = (event: CustomEvent) => {
      setError(event.detail.message);
      setIsVisible(true);

      // 5ì´ˆ í›„ ìë™ ë‹«ê¸°
      setTimeout(() => {
        setIsVisible(false);
        setError(null);
      }, 5000);
    };

    window.addEventListener("globalError", handleGlobalError as EventListener);
    return () =>
      window.removeEventListener(
        "globalError",
        handleGlobalError as EventListener
      );
  }, []);

  if (!isVisible || !error) return null;

  return (
    <dialog
      open
      className="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"
    >
      <div className="bg-white p-6 rounded-lg shadow-lg max-w-md w-full mx-4">
        <div className="flex items-center mb-4">
          <div className="flex-shrink-0">
            <svg
              className="h-6 w-6 text-red-500"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fillRule="evenodd"
                d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
                clipRule="evenodd"
              />
            </svg>
          </div>
          <h3 className="ml-3 text-lg font-medium text-gray-900">ì˜¤ë¥˜ ë°œìƒ</h3>
        </div>
        <p className="text-gray-700 mb-4">{error}</p>
        <div className="flex justify-end">
          <button
            onClick={() => {
              setIsVisible(false);
              setError(null);
            }}
            className="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors"
          >
            ë‹«ê¸°
          </button>
        </div>
      </div>
    </dialog>
  );
}
```

### RTK Query ì—ëŸ¬ ì²˜ë¦¬

#### apiConfig.ts (ì—ëŸ¬ ì²˜ë¦¬ í†µí•©)

```typescript
export const userApi = createApi({
  reducerPath: "userApi",
  baseQuery: fetchBaseQuery({
    baseUrl: "/api/v1",
    prepareHeaders: (headers) => {
      const token = getCookie("pre");
      if (token) {
        headers.set("Authorization", `Bearer ${token}`);
      }
      return headers;
    },
  }),
  endpoints: (builder) => ({
    getUser: builder.query<User, void>({
      query: () => "/users/me",
      // RTK Queryì˜ transformErrorResponse í™œìš©
      transformErrorResponse: (response) => {
        handleApiError(response);
        return response;
      },
    }),
  }),
});
```

### HTTP ìƒíƒœ ì½”ë“œ ì •ì˜

#### http.ts

```typescript
export interface ApiResult<T> {
  success: boolean;
  data?: T;
  error?: {
    code: ExCode;
    message: string;
  };
}

export enum ExCode {
  SUCCESS = "SUCCESS",
  INVALID_REQUEST = "INVALID_REQUEST",
  UNAUTHORIZED = "UNAUTHORIZED",
  FORBIDDEN = "FORBIDDEN",
  NOT_FOUND = "NOT_FOUND",
  INTERNAL_SERVER_ERROR = "INTERNAL_SERVER_ERROR",
  NETWORK_ERROR = "NETWORK_ERROR",
}
```

### ì»´í¬ë„ŒíŠ¸ ë ˆë²¨ ì—ëŸ¬ ì²˜ë¦¬

#### ì—ëŸ¬ ë°”ìš´ë”ë¦¬ íŒ¨í„´ (ê¶Œì¥ ì‚¬í•­)

```tsx
class ErrorBoundary extends React.Component {
  constructor(props: any) {
    super(props);
    this.state = { hasError: false };
  }

  static getDerivedStateFromError(error: Error) {
    return { hasError: true };
  }

  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {
    // ì—ëŸ¬ ë¡œê¹…
    console.error("Error caught by boundary:", error, errorInfo);
    // ì „ì—­ ì—ëŸ¬ ì´ë²¤íŠ¸ ë°œìƒ
    handleApiError({ message: "ì»´í¬ë„ŒíŠ¸ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤." });
  }

  render() {
    if (this.state.hasError) {
      return <div>ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨ í•´ì£¼ì„¸ìš”.</div>;
    }

    return this.props.children;
  }
}
```

### ì—ëŸ¬ ì²˜ë¦¬ í”Œë¡œìš°

1. **API í˜¸ì¶œ ì‹¤íŒ¨**: RTK Queryì—ì„œ ì—ëŸ¬ ë°œìƒ
2. **ì—ëŸ¬ ë³€í™˜**: `handleApiError` í•¨ìˆ˜ì—ì„œ ì‚¬ìš©ì ì¹œí™”ì  ë©”ì‹œì§€ë¡œ ë³€í™˜
3. **ì „ì—­ ì´ë²¤íŠ¸ ë°œìƒ**: `globalError` ì»¤ìŠ¤í…€ ì´ë²¤íŠ¸ ë””ìŠ¤íŒ¨ì¹˜
4. **ëª¨ë‹¬ í‘œì‹œ**: `ErrorModal` ì»´í¬ë„ŒíŠ¸ê°€ ì´ë²¤íŠ¸ ìˆ˜ì‹  ë° í‘œì‹œ
5. **ìë™ ë‹«ê¸°**: 5ì´ˆ í›„ ìë™ìœ¼ë¡œ ëª¨ë‹¬ ë‹«ê¸°
6. **ìˆ˜ë™ ë‹«ê¸°**: ì‚¬ìš©ìê°€ ë‹«ê¸° ë²„íŠ¼ìœ¼ë¡œ ëª¨ë‹¬ ë‹«ê¸°

### ì—ëŸ¬ ì²˜ë¦¬ ì „ëµ

- **ì‚¬ìš©ì ê²½í—˜ ìš°ì„ **: ê¸°ìˆ ì  ì—ëŸ¬ ë©”ì‹œì§€ ëŒ€ì‹  ì‚¬ìš©ì ì¹œí™”ì  ë©”ì‹œì§€ í‘œì‹œ
- **ë¹„ì¹¨íˆ¬ì„±**: ì—ëŸ¬ê°€ ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì¤‘ë‹¨ì‹œí‚¤ì§€ ì•ŠìŒ
- **ìë™ ë³µêµ¬**: ê°€ëŠ¥í•˜ë‹¤ë©´ ìë™ìœ¼ë¡œ ë³µêµ¬ ì‹œë„
- **ë¡œê¹…**: ê°œë°œ í™˜ê²½ì—ì„œ ì—ëŸ¬ ë¡œê¹…ìœ¼ë¡œ ë””ë²„ê¹… ì§€ì›
- **íƒ€ì„ì•„ì›ƒ**: ì¥ì‹œê°„ ë¡œë”© ë°©ì§€ë¥¼ ìœ„í•œ íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬

## ê°œì„  ì œì•ˆ ë° ìµœì í™”

### âœ… ì™„ë£Œëœ ê°œì„ ì‚¬í•­

#### 1. ë³´ì•ˆ ê°•í™” âœ…

- ë³´ì•ˆ ì¿ í‚¤ ì„¤ì • (secure, samesite=strict)
- JWT í† í° ë§Œë£Œ ìë™ ê²€ì¦ ë° ì²˜ë¦¬
- ì•¡ì„¸ìŠ¤ í† í° ìë™ ê°±ì‹  ë¡œì§

#### 2. ìƒíƒœ ê´€ë¦¬ ìµœì í™” âœ…

- useAuthCookieSync í›…ì—ì„œ ìœ ì € ì •ë³´ ì €ì¥ í™œì„±í™”
- Redux ìƒíƒœ ë™ê¸°í™” ê°œì„ 
- í† í° ë§Œë£Œ ì‹œ ìë™ ë¡œê·¸ì•„ì›ƒ

#### 3. API í†µì‹  ê°œì„  âœ…

- RTK Query ìºì‹± ë° íƒœê·¸ ê´€ë¦¬ êµ¬í˜„
- ì¬ì‹œë„ ë¡œì§ ë° ì—ëŸ¬ ì²˜ë¦¬ ê°•í™”
- prepareHeadersë¥¼ í†µí•œ ìë™ í† í° í¬í•¨

#### 4. ì»´í¬ë„ŒíŠ¸ ìµœì í™” âœ…

- React.memoë¥¼ í™œìš©í•œ ë©”ëª¨ì´ì œì´ì…˜
- Next.js Image ì»´í¬ë„ŒíŠ¸ë¡œ ì´ë¯¸ì§€ ìµœì í™”
- ì»¤ìŠ¤í…€ í›…ìœ¼ë¡œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë¶„ë¦¬

#### 5. ì‚¬ìš©ì ê²½í—˜ ê°œì„  âœ…

- Suspenseë¥¼ í†µí•œ ë¹„ë™ê¸° ì»´í¬ë„ŒíŠ¸ ë¡œë”©
- ì ‘ê·¼ì„± ì†ì„± (ARIA ë ˆì´ë¸”) ì¶”ê°€
- í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ì§€ì›

#### 8. ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹… âœ…

- êµ¬ì¡°í™”ëœ ì—ëŸ¬ ë¡œê¹… ì‹œìŠ¤í…œ êµ¬í˜„
- ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ê¸°ë°˜ ë””ë²„ê¹… ì§€ì›
- í™˜ê²½ë³„ ë¡œê¹… ë¶„ë¦¬ (ê°œë°œ/í”„ë¡œë•ì…˜)

### ğŸš€ ì•ìœ¼ë¡œì˜ ê°œë°œ Task

#### 6. ê°œë°œ ê²½í—˜ ê°œì„ 

##### ë‹¨ê¸° Task (1-2ì£¼)

- **íƒ€ì… ì •ì˜ ê°•í™”**: í˜„ì¬ íƒ€ì…ë“¤ì„ ë” ì—„ê²©í•˜ê²Œ ì •ì˜

  ```typescript
  // ëª©í‘œ: ëª¨ë“  API ì‘ë‹µì— ëŒ€í•œ ì—„ê²©í•œ íƒ€ì… ì •ì˜
  interface ApiResponse<T> {
    success: boolean;
    data: T;
    error?: ApiError;
    timestamp: string;
  }
  ```

- **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì¶”ê°€**: ì£¼ìš” ì»´í¬ë„ŒíŠ¸ ë° í›…ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±

  ```typescript
  // Jest + React Testing Library í™œìš©
  describe("UserProfile", () => {
    it("renders user information correctly", () => {
      // í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ êµ¬í˜„
    });
  });
  ```

- **ìŠ¤í† ë¦¬ë¶ ë„ì…**: ì»´í¬ë„ŒíŠ¸ ê°œë°œ ë° ë¬¸ì„œí™”
  ```bash
  npx storybook init
  ```

##### ì¤‘ê¸° Task (1ê°œì›”)

- **E2E í…ŒìŠ¤íŠ¸**: Playwright ë˜ëŠ” Cypressë¡œ ì¢…ë‹¨ê°„ í…ŒìŠ¤íŠ¸
- **ì½”ë“œ í’ˆì§ˆ ë„êµ¬**: ESLint ê·œì¹™ ê°•í™”, Prettier ì„¤ì •
- **ê°œë°œ ì„œë²„ ìµœì í™”**: HMR ê°œì„ , ë²ˆë“¤ ë¶„ì„

#### 7. ì„±ëŠ¥ ìµœì í™”

##### ë‹¨ê¸° Task (1-2ì£¼)

- **ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…**: ë¼ìš°íŠ¸ ê¸°ë°˜ ì½”ë“œ ë¶„í• 

  ```typescript
  // Next.js dynamic import í™œìš©
  const UserProfile = dynamic(() => import("@/components/UserProfile"), {
    loading: () => <LoadingSpinner />,
  });
  ```

- **ë²ˆë“¤ ìµœì í™”**: webpack-bundle-analyzerë¡œ ë¶„ì„ ë° ìµœì í™”

  ```bash
  npm install --save-dev webpack-bundle-analyzer
  ```

- **ì´ë¯¸ì§€ ìµœì í™”**: WebP í¬ë§· ì§€ì›, lazy loading ê°•í™”

##### ì¤‘ê¸° Task (1ê°œì›”)

- **PWA ê¸°ëŠ¥**: ì„œë¹„ìŠ¤ ì›Œì»¤ êµ¬í˜„ìœ¼ë¡œ ì˜¤í”„ë¼ì¸ ì§€ì›

  ```typescript
  // next-pwa íŒ¨í‚¤ì§€ í™œìš©
  const withPWA = require("next-pwa")({
    dest: "public",
  });
  ```

- **ìºì‹± ì „ëµ**: HTTP ìºì‹œ í—¤ë” ìµœì í™”
- **CDN ì„¤ì •**: ì •ì  ìì› CDN ë°°í¬

#### 9. ë°°í¬ ë° ì¸í”„ë¼

##### ë‹¨ê¸° Task (1-2ì£¼)

- **CI/CD íŒŒì´í”„ë¼ì¸**: GitHub Actions ì„¤ì •

  ```yaml
  # .github/workflows/deploy.yml
  name: Deploy to Production
  on:
    push:
      branches: [main]
  jobs:
    deploy:
      # ë°°í¬ ì‘ì—… ì •ì˜
  ```

- **í™˜ê²½ë³„ ì„¤ì •**: ê°œë°œ/ìŠ¤í…Œì´ì§•/í”„ë¡œë•ì…˜ í™˜ê²½ ë¶„ë¦¬
- **ëª¨ë‹ˆí„°ë§ ì„¤ì •**: ì• í”Œë¦¬ì¼€ì´ì…˜ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ (ex: Vercel Analytics)

##### ì¤‘ê¸° Task (1ê°œì›”)

- **ì»¨í…Œì´ë„ˆí™”**: Docker ì´ë¯¸ì§€ ìƒì„± ë° ë°°í¬
- **ìŠ¤ì¼€ì¼ë§**: ë¡œë“œ ë°¸ëŸ°ì‹± ë° ìºì‹± ë ˆì´ì–´ ì¶”ê°€
- **ë³´ì•ˆ ìŠ¤ìº”**: ì •ê¸°ì ì¸ ë³´ì•ˆ ì·¨ì•½ì  ìŠ¤ìº”

#### 10. ì‚¬ìš©ì ê²½í—˜ ë° ì ‘ê·¼ì„±

##### ë‹¨ê¸° Task (1-2ì£¼)

- **ë‹¤í¬ ëª¨ë“œ**: ì‚¬ìš©ì ì„ í˜¸ë„ì— ë”°ë¥¸ í…Œë§ˆ ì „í™˜
- **ë°˜ì‘í˜• ë””ìì¸ ê°•í™”**: ëª¨ë°”ì¼ ìš°ì„  ì ‘ê·¼
- **ë¡œë”© ìƒíƒœ ê°œì„ **: Skeleton UI êµ¬í˜„

##### ì¤‘ê¸° Task (1ê°œì›”)

- **êµ­ì œí™” (i18n)**: ë‹¤êµ­ì–´ ì§€ì›

  ```typescript
  // next-i18next í™œìš©
  import { useTranslation } from "next-i18next";
  ```

- **ì ‘ê·¼ì„± ê°ì‚¬**: WCAG 2.1 AA ì¤€ìˆ˜ ê²€í† 
- **ì‚¬ìš©ì í”¼ë“œë°± ì‹œìŠ¤í…œ**: ì¸ì•± í”¼ë“œë°± ìˆ˜ì§‘

#### 11. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í™•ì¥

##### ì¤‘ê¸° Task (1-2ê°œì›”)

- **ì‚¬ìš©ì í”„ë¡œí•„ ê´€ë¦¬**: í”„ë¡œí•„ í¸ì§‘ ê¸°ëŠ¥
- **ì•Œë¦¼ ì‹œìŠ¤í…œ**: í‘¸ì‹œ ì•Œë¦¼ ë° ì¸ì•± ì•Œë¦¼
- **ì†Œì…œ ê¸°ëŠ¥**: ì¹œêµ¬ ì¶”ê°€, íŒ”ë¡œìš° ê¸°ëŠ¥
- **ì½˜í…ì¸  ê´€ë¦¬**: ê²Œì‹œë¬¼ ì‘ì„± ë° ê´€ë¦¬

#### 12. ë°ì´í„° ë¶„ì„ ë° ëª¨ë‹ˆí„°ë§

##### ì¤‘ê¸° Task (1ê°œì›”)

- **ì‚¬ìš©ì í–‰ë™ ì¶”ì **: Google Analytics 4 ë˜ëŠ” Mixpanel ì—°ë™
- **ì—ëŸ¬ ëª¨ë‹ˆí„°ë§**: Sentry ë˜ëŠ” LogRocket ì—°ë™
- **ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§**: Core Web Vitals ì¶”ì 
- **A/B í…ŒìŠ¤íŠ¸**: ê¸°ëŠ¥ë³„ ì‚¬ìš©ì ë°˜ì‘ ë¶„ì„

### ğŸ“‹ ìš°ì„ ìˆœìœ„ë³„ Task ëª©ë¡

#### ğŸ”¥ ê¸´ê¸‰ (ì´ë²ˆ ì£¼)

1. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì¶”ê°€ (UserProfile, useAuthCookieSync)
2. ESLint ê·œì¹™ ê°•í™” ë° ì½”ë“œ í’ˆì§ˆ ê°œì„ 
3. CI/CD íŒŒì´í”„ë¼ì¸ ê¸°ë³¸ ì„¤ì •

#### ğŸ“… ë‹¨ê¸° (2-4ì£¼)

1. ì½”ë“œ ìŠ¤í”Œë¦¬íŒ… êµ¬í˜„
2. PWA ê¸°ë³¸ ê¸°ëŠ¥ ì¶”ê°€
3. ë‹¤í¬ ëª¨ë“œ êµ¬í˜„
4. ë°˜ì‘í˜• ë””ìì¸ ê°œì„ 

#### ğŸ“† ì¤‘ê¸° (1-3ê°œì›”)

1. E2E í…ŒìŠ¤íŠ¸ êµ¬í˜„
2. êµ­ì œí™” ì§€ì›
3. ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ êµ¬ì¶•
4. ì‚¬ìš©ì í”¼ë“œë°± ì‹œìŠ¤í…œ ê°œë°œ

#### ğŸ¯ ì¥ê¸° (3-6ê°œì›”)

1. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í™•ì¥ (í”„ë¡œí•„ ê´€ë¦¬, ì•Œë¦¼ ë“±)
2. ë°ì´í„° ë¶„ì„ ì‹œìŠ¤í…œ êµ¬ì¶•
3. ëª¨ë°”ì¼ ì•± ê°œë°œ (React Native)
4. AI/ML ê¸°ëŠ¥ í†µí•©

### ê²°ë¡ 

ê¸°ë³¸ì ì¸ ë³´ì•ˆ, ì„±ëŠ¥, ì‚¬ìš©ì ê²½í—˜ ê°œì„ ì€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì•ìœ¼ë¡œëŠ” ê°œë°œ ìƒì‚°ì„± í–¥ìƒ, ì‚¬ìš©ì ê²½í—˜ ê°œì„ , ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í™•ì¥ì„ ì¤‘ì ì ìœ¼ë¡œ ì§„í–‰í•  ê³„íšì…ë‹ˆë‹¤. ê° TaskëŠ” í˜„ì¬ í”„ë¡œì íŠ¸ì˜ ìƒíƒœì™€ ìš°ì„ ìˆœìœ„ë¥¼ ê³ ë ¤í•˜ì—¬ ìˆœì°¨ì ìœ¼ë¡œ ì§„í–‰ë  ê²ƒì…ë‹ˆë‹¤.
